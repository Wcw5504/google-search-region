<% const { showFlags, userRegions } = config; %>

<div class="rIbAWc hide-focus-ring">
  <!-- Menu Dropdown Toggle -->
  <div class="hdtb-mn-hd gm-region-menu-toggle <%- currentRegion ? 'hdtb-sel' : '' %>" data-gm-region-onclick="toggleMenu" role="button">
    <div class="mn-hd-txt" data-gm-region-onclick="toggleMenu">
      <% if (currentRegion) { %>
        <% let { name, country } = currentRegion; %>
        <% if (country && showFlags) { %> <span class="flag flag-<%- country %>" data-gm-region-onclick="toggleMenu"></span> <% } %>
        <%- name %>
      <% } else { %>
        Regions
      <% } %>
    </div>
    <span class="mn-dwn-arw"></span>
  </div>

  <!-- Menu Dropdown -->
  <ul class="tFPnEd YD3ICb gm-region-menu-dropdown">
    <!-- User Regions List -->
    <% userRegions.map(getRegionByID).forEach(region => { %>
      <% if (!region) { return; } %>
      <% let { id, name, country } = region; %>
      <% let isCurrent = currentRegion && currentRegion.id === id; %>
      <% let url = getSearchURL(region); %>
      <li class="hdtbItm <%- isCurrent ? 'hdtbSel' : '' %>">
        <a class="q qs" href="<%- url %>">
          <% if (country && showFlags) { %> <span class="flag flag-<%- country %>"></span> <% } %>
          <%- name %>
        </a>
      </li>
    <% }); %>

    <!-- Configuration Modal Toggle -->
    <li class="hdtbItm">
      <div class="cdr_sep"></div>
      <a class="q qs gm-region-menu-config" data-gm-region-onclick="showModal" title="Google Search Region">...</a>
    </li>
  </ul>
</div>
